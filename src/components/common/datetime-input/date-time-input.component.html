<div id="dateTimeItem + {{ control }}">
  <ion-input
    [class.left-align]="leftAlign"
    class="input-box type-{{ displayType }}"
    id="{{ inputId }}"
    [attr.aria-label]="ariaLabel"
    [(ngModel)]="displayValue"
    [disabled]="disabled"
    [placeholder]="displayType === 'date' ? formatDisplayDate(initialValue) : formatDisplayTime(initialValue)"
    emojiBlock
    pasteSanitiser
  >
  </ion-input>
  <ion-modal
    class="{{ displayType }}-modal"
    trigger="dateTimeItem + {{ control }}"
    [keepContentsMounted]="false"
    mode="ios"
    #modal
    [backdropDismiss]="true"
    (didDismiss)="selectedBuffer = null"
  >
    <ng-template>
      <div *ngIf="displayType === DisplayType.Date">
        <ion-row class="calendar-row-height">
          <ion-col class="display-flex ion-justify-content-center">
            <mat-calendar
              #datePicker
              [maxDate]="maxValue"
              [minDate]="minValue"
              (monthSelected)="handleMonthSelected($event, datePicker.minDate)"
              (selectedChange)="selectedBuffer = $event"
              [startAt]="selectedValue"
              [(selected)]="selectedBuffer ? selectedBuffer : selectedValue"
              [headerComponent]="DateHeaderComponent"
            >
            </mat-calendar>
          </ion-col>
        </ion-row>
        <ion-row class="top-border">
          <ion-col
            *ngIf="datePicker.currentView === 'month'"
            class="right-border display-flex ion-justify-content-center ion-no-padding"
          >
            <ion-button
              fill="clear"
              class="terminate-button full-width"
              id="cancel-datepicker-button"
              (click)="modal.dismiss(); buttonEmit(datePicker.selected, 'cancel')"
            >
              <ion-text> Cancel </ion-text>
            </ion-button>
          </ion-col>
          <ion-col
            *ngIf="datePicker.currentView === 'month'"
            class="display-flex ion-justify-content-center ion-no-padding"
          >
            <ion-button
              fill="clear"
              class="black-text full-width"
              id="confirm-datepicker-button"
              (click)="
                modal.dismiss(); onSelected(selectedBuffer, displayType); buttonEmit(datePicker.selected, 'done')
              "
            >
              <ion-text> OK </ion-text>
            </ion-button>
          </ion-col>
          <ion-col
            *ngIf="datePicker.currentView !== 'month'"
            class="display-flex ion-justify-content-center ion-no-padding"
          >
            <ion-button
              fill="clear"
              class="black-text full-width"
              id="back-datepicker-button"
              (click)="datePicker.currentView = handleBackButton(); buttonEmit(datePicker.selected, 'back')"
            >
              <ion-text> Back </ion-text>
            </ion-button>
          </ion-col>
        </ion-row>
      </div>
      <ion-datetime
        *ngIf="displayType === DisplayType.Time"
        class="time-modal-content"
        #timePicker
        id="{{ pickerId }}"
        [showDefaultButtons]="!emitButtonEvents"
        [showClearButton]="showClearButton && !emitButtonEvents"
        size="cover"
        presentation="time"
        [(ngModel)]="outputValue"
        [max]="maxValue"
        [min]="minValue"
        (ionChange)="onSelected(timePicker.value, displayType)"
      >
        <ion-buttons slot="buttons" *ngIf="emitButtonEvents">
          <ion-button color="primary" (click)="timePicker.cancel(); buttonEmit(timePicker, 'cancel')"
            >Cancel</ion-button
          >
          <ion-button
            *ngIf="showClearButton"
            color="primary"
            (click)="timePicker.reset(); buttonEmit(timePicker, 'clear')"
            >Clear
          </ion-button>
          <ion-button color="primary" (click)="timePicker.confirm(); buttonEmit(timePicker, 'done')">Done</ion-button>
        </ion-buttons>
      </ion-datetime>
    </ng-template>
  </ion-modal>
</div>
