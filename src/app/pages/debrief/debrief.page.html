<ion-header>
    <practice-mode-banner *ngIf="isEndToEndPracticeMode || isPracticeMode"></practice-mode-banner>
    <ion-toolbar mode="ios" [ngClass]="{'toolbar-no-padding': isEndToEndPracticeMode}">
        <ion-buttons id="back-button" slot="start">
            <ion-back-button></ion-back-button>
        </ion-buttons>
        <ion-title id="page-title">{{ 'debrief.title' | translate }} - {{pageState.candidateName$ | async}}</ion-title>
    </ion-toolbar>
    <test-outcome-debrief-card [outcome]="outcome"></test-outcome-debrief-card>
</ion-header>

<ion-content>
    <speed-check-debrief-card
            *ngIf="pageState.showSpeedCheck$ | async"
            [emergencyStop]="pageState.emergencyStop$ | async"
            [avoidance]="pageState.avoidance$ | async"
            [avoidanceAttempted]="pageState.avoidanceAttempted$ | async">
    </speed-check-debrief-card>

    <eta-debrief-card
            [hasPhysicalEta]="hasPhysicalEta"
            [hasVerbalEta]="hasVerbalEta">
    </eta-debrief-card>

    <dangerous-faults-debrief-card
            [dangerousFaults]="pageState.dangerousFaults$ | async">
    </dangerous-faults-debrief-card>

    <serious-faults-debrief-card
            [seriousFaults]="pageState.seriousFaults$ | async">
    </serious-faults-debrief-card>

    <driving-faults-debrief-card
            [drivingFaults]="pageState.drivingFaults$ | async"
            [drivingFaultCount]="pageState.drivingFaultCount$ | async"
            [testCategory]="testCategory">
    </driving-faults-debrief-card>

    <eco-debrief-card
            *ngIf="pageState.showEco$ | async"
            [adviceGivenControl]="adviceGivenControl"
            [adviceGivenPlanning]="adviceGivenPlanning">
    </eco-debrief-card>

    <vehicle-checks-card-cat-b *ngIf="isCategoryBTest()"></vehicle-checks-card-cat-b>
    <vehicle-checks-card
            *ngIf="showVehicleChecksArrayCard()"
            [category]="pageState.category$ | async"
            [tellMeShowMeQuestions]="pageState.tellMeShowMeQuestions$ | async">
    </vehicle-checks-card>

    <cpc-debrief-card *ngIf="!isTerminated() && showCPCDebriefCard()"
                      [overallScore]="pageState.overallScore$ | async"
                      [question1]="pageState.question1$ | async"
                      [question2]="pageState.question2$ | async"
                      [question3]="pageState.question3$ | async"
                      [question4]="pageState.question4$ | async"
                      [question5]="pageState.question5$ | async"
                      [testOutcome]="outcome">
    </cpc-debrief-card>
    <safety-and-balance-card-cat-a-mod2 *ngIf="pageState.showSafetyAndBalance$ | async">
    </safety-and-balance-card-cat-a-mod2>

    <!--    <ion-grid>-->
    <!--        <ion-card class="ion-padding">-->
    <!--            <ion-row class="tr-standard-text">Total Score</ion-row>-->
    <!--            <br>-->
    <!--            <ion-row>-->
    <!--                <ion-col class="tr-standard-text" size="20">{{pageState.totalScore$ | async}}</ion-col>-->
    <!--                <ion-col><p>Sufficient competence demonstrated to permit entry to the Register of Approved Driving Instructors</p></ion-col>-->
    <!--            </ion-row>-->
    <!--        </ion-card>-->
    <!--        <ion-card class="ion-padding">-->
    <!--            <ion-row class="tr-standard-text">Lesson & Theme</ion-row>-->
    <!--            <br>-->
    <!--            <ion-row>-->
    <!--                <ion-col class="tr-standard-text" size="20">Student</ion-col>-->
    <!--                <ion-col><p>{{(pageState.lessonTheme$ | async).studentLevel}}</p></ion-col>-->
    <!--            </ion-row>-->
    <!--            <ion-row>-->
    <!--                <ion-col class="tr-standard-text" size="20">Theme</ion-col>-->
    <!--                <ion-col><p>{{(pageState.lessonTheme$ | async).lessonThemes}}</p></ion-col>-->
    <!--            </ion-row>-->
    <!--        </ion-card>-->

    <!--        <ion-row style="font-size: 12.5px;">-->
    <!--            <ion-col size="14">-->
    <!--                <ion-row>-->
    <!--                    <ion-col size="10"><b>0</b></ion-col>-->
    <!--                    <ion-col size="86"> - No evidence</ion-col>-->
    <!--                </ion-row>-->
    <!--            </ion-col>-->
    <!--            <ion-col>-->
    <!--                <ion-row>-->
    <!--                    <ion-col size="5"><b>1</b></ion-col>-->
    <!--                    <ion-col size="91"> - Demonstrated in a few elements</ion-col>-->
    <!--                </ion-row>-->
    <!--            </ion-col>-->
    <!--            <ion-col>-->
    <!--                <ion-row>-->
    <!--                    <ion-col size="5"><b>2</b></ion-col>-->
    <!--                    <ion-col size="91"> - Demonstrated in most elements</ion-col>-->
    <!--                </ion-row>-->
    <!--            </ion-col>-->
    <!--            <ion-col>-->
    <!--                <ion-row>-->
    <!--                    <ion-col size="5"><b>3</b></ion-col>-->
    <!--                    <ion-col size="91"> - Demonstrated in all elements</ion-col>-->
    <!--                </ion-row>-->
    <!--            </ion-col>-->
    <!--        </ion-row>-->
    <!--        <ion-row>-->
    <!--            <ion-col>-->
    <!--                <ion-row class="tr-standard-text">Lesson Planning-->
    <!--                    - {{(pageState.lessonPlanning$ | async).score}}</ion-row>-->
    <!--            </ion-col>-->

    <!--            <ion-col>-->
    <!--                <ion-row class="tr-standard-text">Teaching & Learning Strategies-->
    <!--                    - {{(pageState.teachingLearningStrategies$ | async).score}}</ion-row>-->
    <!--            </ion-col>-->

    <!--            <ion-col>-->
    <!--                <ion-row class="tr-standard-text">Risk Management-->
    <!--                    - {{(pageState.riskManagement$ | async).score}}</ion-row>-->
    <!--            </ion-col>-->
    <!--        </ion-row>-->
    <!--    </ion-grid>-->

    <adi3-debrief-card
            [totalScore]="pageState.totalScore$ | async"
            [lessonTheme]="pageState.lessonTheme$ | async"
            [lessonPlanning]="pageState.lessonPlanning$ | async"
            [riskManagement]="pageState.riskManagement$ | async"
            [teachingLearningStrategies]="pageState.teachingLearningStrategies$ | async">
    </adi3-debrief-card>
</ion-content>

<ion-footer>
    <div id="end-debrief-background">
        <ion-button id="end-debrief-button" class="mes-primary-button" (click)="endDebrief()">
            <h3>{{ 'debrief.end' | translate }}</h3>
        </ion-button>
    </div>
</ion-footer>
