<ion-card>
  <ion-card-header>
    <h2 class="des-header-style-4" id="view-test-result-test-details-title">Test details</h2>
  </ion-card-header>
  <ion-card-content>
    <ion-grid>
      <ion-row>
        <inappropriate-use-banner></inappropriate-use-banner>
      </ion-row>
      <data-row
        [label]="'Date'"
        [value]="data.date">
      </data-row>

      <data-row
        [label]="'Time'"
        [value]="data.time">
      </data-row>

      <data-row
        [label]="'Application reference'"
        [value]="data.applicationReference">
      </data-row>

      <data-row
        [label]="'Test category'"
        [value]="data.category">
      </data-row>

      @if (showFullCatHeld()) {
<data-row
       
        [label]="'Full cat ' + data.category?.split('+')[0] + ' held?'"
        [value]="data?.fullLicenceHeld ? 'Yes' : 'No'">
      </data-row>
}

      <data-row
        [label]="'Slot type'"
        [value]="data.slotType"
        [shouldShowIndicator]="data.slotType !== 'Standard Test'">
      </data-row>

      <data-row-custom
        [label]="'Additional requirements'"
        [shouldShowIndicator]="additionalReqsIsPopulated(data.specialNeeds)"
        [centeredLabel]="data.specialNeeds?.length <= 1"
        [centeredIcon]="data.specialNeeds?.length <= 1"
        [centredData]="data.specialNeeds?.length <= 1">
        @if (data.specialNeeds?.length > 1) {
<ng-container class="mes-data">
          @for (additionalReq of data.specialNeeds; track additionalReq) {
  <ul class="ion-no-margin mes-data">
            <li>{{additionalReq}}</li>
          </ul>
}
        </ng-container>
} @else {

          <div class="mes-data">{{data.specialNeeds[0]}}</div>
        
}
              </data-row-custom>

      @if (data.entitlementCheck !== undefined) {
<data-row
       
        [label]="'Entitlement check'"
        [value]="data.entitlementCheck ? 'Entitlement check is required.' : 'No'"
        [shouldShowIndicator]="data.entitlementCheck">
      </data-row>
}

      <data-row-custom
        [shouldHaveSeperator]="showAttemptNumber()||showPrn()"
        [label]="'Additional information'">
        @if (data.previousCancellations.length === 0) {
<div class="mes-data">None</div>
}
        @if (!(data.previousCancellations.length === 0)) {
<div>
          @if (data.previousCancellations.length > 0) {
<div>
            <div class="mes-data previous-cancellation-padding">Previous cancellations:</div>
            @for (previousCancellation of data.previousCancellations; track previousCancellation) {
  <ul
                class="ion-no-margin mes-data">
              <li>
                {{previousCancellation}}
              </li>
            </ul>
}
          </div>
}
        </div>
}
      </data-row-custom>

      @if (showPrn()) {
<data-row
       
        [label]="'Personal reference number'"
        [value]="candidateDetails.prn">
      </data-row>
}

      @if (showAttemptNumber()) {
<data-row
       
        [label]="'Attempt number'"
        [shouldHaveSeperator]="false"
        [value]="candidateDetails.attemptNumber ? candidateDetails.attemptNumber + 1 : 1">
      </data-row>
}
    </ion-grid>
  </ion-card-content>
</ion-card>
