<ion-header>
  <practice-mode-banner *ngIf='isEndToEndPracticeMode'></practice-mode-banner>
  <ion-toolbar mode='ios' [ngClass]="{'toolbar-no-padding': isEndToEndPracticeMode}">
    <ion-title id='waiting-room-to-car-page-title'>{{pageState.candidateName$ | async}}</ion-title>
    <ion-buttons id='wrtc-back-button' slot='start'>
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-buttons id='end-test-button' slot='end'>
      <end-test-link
        [isDelegated]='pageState.delegatedTest$ | async'
        [category]='pageState.category$ | async'
        [isPracticeMode]='isPracticeMode'
        [shouldAuthenticate]='false'>
      </end-test-link>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content force-overscroll='false'>
  <div>
    <form [formGroup]='form' (ngSubmit)='onSubmit()'>
      <ion-grid>
        <ion-row class='ion-no-padding' id='post-eyesight-form-content'>
          <ion-col class='ion-no-padding'>
            <vehicle-registration
              [formGroup]='form'
              [vehicleRegistration]='pageState.registrationNumber$ | async'
              (vehicleRegistrationChange)='vehicleRegistrationChanged($event)'
              (vehicleRegistrationBlur)='getMOTStatus()'>
            </vehicle-registration>

            <test-category [testCategory]='pageState.category$ | async'></test-category>

            <dimensions-card
              [vehicleLength]='pageState.vehicleLength$ | async'
              [vehicleWidth]='pageState.vehicleWidth$ | async'
              [vehicleHeight]='pageState.vehicleHeight$ | async'
              [numberOfSeats]='pageState.numberOfSeats$ | async'>
            </dimensions-card>

            <accompaniment-card
              [formGroup]='form'
              [instructorAccompaniment]='pageState.instructorAccompaniment$ | async'
              [supervisorAccompaniment]='pageState.supervisorAccompaniment$ | async'
              [otherAccompaniment]='pageState.otherAccompaniment$ | async'
              [interpreterAccompaniment]='pageState.interpreterAccompaniment$ | async'
              (instructorAccompanimentChange)='instructorAccompanimentToggled()'
              (supervisorAccompanimentChange)='supervisorAccompanimentToggled()'
              (otherAccompanimentChange)='otherAccompanimentToggled()'
              (interpreterAccompanimentChange)='interpreterAccompanimentToggled()'>
            </accompaniment-card>
          </ion-col>
        </ion-row>

        <div>
          <warning-banner class='banner-space' warningText='Is cab locked down? (if applicable)'></warning-banner>
          <warning-banner warningText='Is load secure? (if applicable)'></warning-banner>
        </div>
      </ion-grid>
    </form>
  </div>
</ion-content>

<ion-footer *ngIf='{
  delegatedTest: pageState.delegatedTest$ | async
} as data'>
  <ion-row class='mes-full-width-card box-shadow'>
    <ion-col *ngIf='!data?.delegatedTest' size='45' class='ion-text-center'>
      <ion-button
        shape='round'
        class='mes-grey-button wrtc-footer-btn'
        id='view-test-centre-journal-button' (click)='onViewTestCentreJournal()'>
        <h3>View test centre journal</h3>
      </ion-button>
    </ion-col>
    <ion-col *ngIf='!data?.delegatedTest' size='6'></ion-col>
    <ion-col [size]='data?.delegatedTest ? 96 : 45' class='ion-text-center'>
      <ion-button
        shape='round'
        class='mes-primary-button wrtc-footer-btn'
        id='continue-to-test-report-button' (click)='onSubmit()'>
        <h3>Continue to test report</h3>
      </ion-button>
    </ion-col>
  </ion-row>
</ion-footer>
